<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Entorno 3D VR</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <style>
    #startButton {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 16px;
      z-index: 1000;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="startButton">Start</button>
  <a-scene vr-mode-ui="enabled: true">
    <!-- Suelo -->
    <a-entity geometry="primitive: plane; width: 100; height: 100" material="color: green" rotation="-90 0 0" position="0 0 0"></a-entity>

    <!-- Paredes con colisión -->
    <a-entity geometry="primitive: plane; width: 100; height: 20" material="color: blue" position="0 10 -50" static-body></a-entity>
    <a-entity geometry="primitive: plane; width: 100; height: 20" material="color: hotpink" position="0 10 50" rotation="0 180 0" static-body></a-entity>
    <a-entity geometry="primitive: plane; width: 100; height: 20" material="color: yellow" position="-50 10 0" rotation="0 90 0" static-body></a-entity>
    <a-entity geometry="primitive: plane; width: 100; height: 20" material="color: orange" position="50 10 0" rotation="0 -90 0" static-body></a-entity>
    <a-entity geometry="primitive: plane; width: 100; height: 100" material="color: gray" rotation="90 0 0" position="0 20 0" static-body></a-entity>

    <!-- Cámara con movimiento y controles de VR -->
    <a-entity id="camera" camera look-controls wasd-controls position="0 1.8 0">
      <a-entity cursor="fuse: true; fuseTimeout: 500"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: white; shader: flat">
      </a-entity>
    </a-entity>

    <!-- Controladores de mano -->
    <a-entity hand-controls="hand: left; handModelStyle: lowPoly; color: #00FF00"></a-entity>
    <a-entity hand-controls="hand: right; handModelStyle: lowPoly; color: #FF0000"></a-entity>

    <!-- Cubos en movimiento -->
    <a-box class="movingCube" position="-10 1 -10" color="purple" width="2" height="2" depth="2"></a-box>
    <a-box class="movingCube" position="10 1 -10" color="red" width="2" height="2" depth="2"></a-box>
    <a-box class="movingCube" position="-10 1 10" color="blue" width="2" height="2" depth="2"></a-box>
    <a-box class="movingCube" position="10 1 10" color="yellow" width="2" height="2" depth="2"></a-box>
  </a-scene>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cubes = document.querySelectorAll('.movingCube');
      let directions = Array.from(cubes).map(() => ({ x: (Math.random() - 0.5) * 0.2, z: (Math.random() - 0.5) * 0.2 }));
      let bounds = 48;
      let animationRunning = false;

      function animateCubes() {
        if (!animationRunning) return;

        cubes.forEach((cube, index) => {
          let position = cube.getAttribute('position');
          
          // Rebotar en los límites
          if (position.x > bounds || position.x < -bounds) directions[index].x *= -1;
          if (position.z > bounds || position.z < -bounds) directions[index].z *= -1;
          
          cube.setAttribute('position', {
            x: position.x + directions[index].x,
            y: position.y,
            z: position.z + directions[index].z
          });
        });
        requestAnimationFrame(animateCubes);
      }

      document.getElementById('startButton').addEventListener('click', () => {
        animationRunning = true;
        animateCubes();
      });
    });
  </script>
</body>
</html>
